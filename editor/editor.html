<!DOCTYPE html>
<html lang="en" >
  <head>
    <meta charset="utf-8">
    <title>T-Shirt Design Editor</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Neetish Raj">
    <meta name="copyright" content="2018, Neetish Raj">
    <meta name="keywords" content="Tshirt design editor">
    <meta name="description" content="A Simple design editor for performing light editing of images with persistance storage, will be used by editors">
    <link rel="stylesheet" href="editor.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.22/fabric.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular.min.js" charset="utf-8"></script>
    <script src="https://code.angularjs.org/1.7.2/angular-route.min.js" charset="utf-8"></script>
    <script src="util-module.js" charset="utf-8"></script>
    <script src="editor-module.js" charset="utf-8"></script>
    <script src="img-module.js" charset="utf-8"></script>
    <script src="editor.js" charset="utf-8"></script>
  </head>
  <body>
    <header>
      <div class="">
        <nav>
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/editor">Editor</a></li>
            <li><a href="/user/designs">My Designs</a></li>
          </ul>
        </nav>
      </div>
    </header>


    <main>
      <div class="editorContainer">
        <div class="imagePanel">
          <button type="button" name="imageAddButton" class="panelButton" onclick="UtilModule.openModal('imageUploadModal')">Add Images</button>
          <button type="button" name="imageAddButton" class="panelButton" onclick="UtilModule.openModal('textInputModal')">Add Text</button>
          <div class="imagesContainer">
            <p>Single click on images to add them to editor</p>
            <p>To remove image/text from editor select them, and click Remove Selected button</p>
            <img src="https://i.imgur.com/Sv5XTlh.png" alt="tshirt Template" draggable="false" onclick="EditorModule.addImage(this)">
          </div>
        </div>

        <div class="canvasPanel">
        </div>

        <div class="controlPanel">
          <button type="button" name="editHistory" class="panelButton" onclick="">Edit History</button>
          <button type="button" name="editHistory" class="panelButton" onclick="" style="width:49%;">Undo</button>
          <button type="button" name="editHistory" class="panelButton" onclick="" style="width:49%;">Redo</button>

          <button type="button" name="imageRemoveButton" class="panelButton" onclick="EditorModule.removeObject()" style="margin-top:60px;">Remove Selected</button>
          <button type="button" name="imageRemoveButton" class="panelButton" onclick="EditorModule.layerUp()">Layer Up Selected</button>
          <button type="button" name="imageRemoveButton" class="panelButton" onclick="EditorModule.layerDown()">Layer Down Selected</button>

          <a id="download" download="MyTshirtDesign.png">
            <button type="button" name="imageDownloadButton" class="panelButton" onclick="UtilModule.openModal('imageDownloadModal');" style="margin-top:60px;">Download Image</button>
          </a>
        </div>
      </div>


      <!--Image Upload Modal -->
      <div id="imageUploadModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="UtilModule.closeModal('imageUploadModal')">&times;</span>
          <p>Pick your Image to use for editing.</p>
          <form method="post" enctype="multipart/form-data" action="/upload">
            <input type="file" accept="image/*" onchange="ImgModule.fetchImage(event)"><br>
            <img id="output" style="height:100px; width=100px"><br>
            <input type="submit" value="Save Image to your profile">
          </form>
        </div>
      </div>

      <!--Text Input Modal -->
      <div id="textInputModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="UtilModule.closeModal('textInputModal')">&times;</span>
          <p>Enter the text</p>
          <textarea id="textInput" rows="8" cols="80"></textarea><br>
          <button type="button" name="insertTextButton" onclick="EditorModule.addText('textInput'); UtilModule.closeModal('textInputModal') ">Insert Text</button>
        </div>
      </div>

      <!--Image Download Modal -->
      <div id="imageDownloadModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="UtilModule.closeModal('imageDownloadModal')">&times;</span>
          <p>
            Download image as
            <input type="text" name="downloadedImageName" id="downloadedImageName" value="MyTshirtdesign.png">
          </p>
          <button type="button" name="downloadImageButton" onclick="ImgModule.downloadImage('downloadedImageName'); UtilModule.closeModal('imageDownloadModal');">Download Image</button>
        </div>
      </div>

    </main>


    <footer>
      <div class="">
        <p>Our Footer here</p>
      </div>
    </footer>
    <script type="text/javascript">

    </script>
  </body>
</html>
